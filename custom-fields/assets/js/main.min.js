!function(e,t,n,o){"use strict";var i=i||{};i.funcs={},i.vars={onloaded:!1,$body:e("body"),$window:e(t),$document:e(n),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:e("body").hasClass("rtl")},i.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,n){var o=RegExp(i.helper.preg_quote(n+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(o,n+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,t,n){var o;return function(){var i=this,l=arguments,a=function(){o=null,n||e.apply(i,l)},c=n&&!o;clearTimeout(o),o=setTimeout(a,t),c&&e.apply(i,l)}}},e.fn.fpblock_clone=function(){for(var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),o=t.find("select").add(t.filter("select")),i=0;i<n.length;++i)for(var l=0;l<n[i].options.length;++l)!0===n[i].options[l].selected&&(o[i].options[l].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},e.fn.fpblock_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault(),e(".fpblock-wrapper").toggleClass("fpblock-show-all"),e(".fpblock-section").fpblock_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.fpblock_nav_options=function(){return this.each(function(){var n,o=e(this),i=e(t),l=e("#wpwrap"),a=o.find("a");i.on("hashchange fpblock.hashchange",function(){var o,i=t.location.hash.replace("#tab=","")||a.first().attr("href").replace("#tab=",""),c=e('[data-tab-id="'+i+'"]');if(c.length){c.closest(".fpblock-tab-item").addClass("fpblock-tab-expanded").siblings().removeClass("fpblock-tab-expanded"),c.next().is("ul")&&(i=(c=c.next().find("li").first().find("a")).data("tab-id")),a.removeClass("fpblock-active"),c.addClass("fpblock-active"),n&&n.addClass("hidden");var r=e('[data-section-id="'+i+'"]');r.removeClass("hidden"),r.fpblock_reload_script(),e(".fpblock-section-id").val(r.index()+1),n=r,l.hasClass("wp-responsive-open")&&(e("html, body").animate({scrollTop:r.offset().top-50},200),l.removeClass("wp-responsive-open"))}}).trigger("fpblock.hashchange")})},e.fn.fpblock_nav_metabox=function(){return this.each(function(){var t,n=e(this),i=n.find("a"),l=n.parent().find(".fpblock-section");i.each(function(n){e(this).on("click",function(a){a.preventDefault();var c=e(this);i.removeClass("fpblock-active"),c.addClass("fpblock-active"),t!==o&&t.addClass("hidden");var r=l.eq(n);r.removeClass("hidden"),r.fpblock_reload_script(),t=r})}),i.first().trigger("click")})},e.fn.fpblock_page_templates=function(){this.length&&e(n).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=e(this).val()||"default";e(".fpblock-page-templates").removeClass("fpblock-metabox-show").addClass("fpblock-metabox-hide"),e(".fpblock-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("fpblock-metabox-hide").addClass("fpblock-metabox-show")})},e.fn.fpblock_post_formats=function(){this.length&&e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t="0"===t?"default":t,e(".fpblock-post-formats").removeClass("fpblock-metabox-show").addClass("fpblock-metabox-hide"),e(".fpblock-post-format-"+t).removeClass("fpblock-metabox-hide").addClass("fpblock-metabox-show")})},e.fn.fpblock_search=function(){return this.each(function(){e(this).find("input").on("change keyup",function(){var t=e(this).val(),n=e(".fpblock-wrapper"),o=n.find(".fpblock-section").find("> .fpblock-field:not(.fpblock-depend-on)"),i=o.find("> .fpblock-title, .fpblock-search-tags");t.length>3?(o.addClass("fpblock-metabox-hide"),n.addClass("fpblock-search-all"),i.each(function(){var n=e(this);if(n.text().match(RegExp(".*?"+t+".*?","i"))){var o=n.closest(".fpblock-field");o.removeClass("fpblock-metabox-hide"),o.parent().fpblock_reload_script()}})):(o.removeClass("fpblock-metabox-hide"),n.removeClass("fpblock-search-all"))})})},e.fn.fpblock_sticky=function(){return this.each(function(){var n=e(this),o=e(t),i=n.find(".fpblock-header-inner"),l=parseInt(i.css("padding-left"))+parseInt(i.css("padding-right")),a=0,c=!1,r=function(){var e=Math.max(32,n.offset().top-a),t=o.innerWidth();e<=32&&t>782?(i.css({width:n.outerWidth()-l}),n.css({height:n.outerHeight()}).addClass("fpblock-sticky")):(i.removeAttr("style"),n.removeAttr("style").removeClass("fpblock-sticky"))},f=function(){c||requestAnimationFrame(function(){r(),c=!1}),c=!0},d=function(){a=o.scrollTop(),f()};o.on("scroll resize",d),d()})},e.fn.fpblock_dependency=function(){return this.each(function(){var t=e(this),n=t.children("[data-controller]");if(n.length){var o=e.fpblock_deps.createRuleset(),l=e.fpblock_deps.createRuleset(),a=[],c=[];n.each(function(){var t=e(this),n=t.data("controller").split("|"),i=t.data("condition").split("|"),r=t.data("value").toString().split("|"),f=!!t.data("depend-global"),d=f?l:o;e.each(n,function(e,n){var o=r[e]||"",l=i[e]||i[0];(d=d.createRule('[data-depend-id="'+n+'"]',l,o)).include(t),f?c.push(n):a.push(n)})}),a.length&&e.fpblock_deps.enable(t,o,a),c.length&&e.fpblock_deps.enable(i.vars.$body,l,c)}})},e.fn.fpblock_field_accordion=function(){return this.each(function(){e(this).find(".fpblock-accordion-title").on("click",function(){var t=e(this),n=t.find(".fpblock-accordion-icon"),o=t.next();n.hasClass("fa-angle-right")?n.removeClass("fa-angle-right").addClass("fa-angle-down"):n.removeClass("fa-angle-down").addClass("fa-angle-right"),o.data("opened")||(o.fpblock_reload_script(),o.data("opened",!0)),o.toggleClass("fpblock-accordion-open")})})},e.fn.fpblock_field_backup=function(){return this.each(function(){if(o!==t.wp.customize){var n=this,l=e(this),a=(e("body"),l.find(".fpblock-import")),c=l.find(".fpblock-reset");n.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("fpblock_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},c.on("click",function(e){e.preventDefault(),i.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("fpblock-reset",{unique:c.data("unique"),nonce:c.data("nonce")}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("fpblock_field_backup_notification")}))}),a.on("click",function(e){e.preventDefault(),i.vars.is_confirm&&(n.notificationOverlay(),t.wp.ajax.post("fpblock-import",{unique:a.data("unique"),nonce:a.data("nonce"),data:l.find(".fpblock-import-data").val()}).done(function(e){t.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("fpblock_field_backup_notification")}))})}})},e.fn.fpblock_field_background=function(){return this.each(function(){e(this).find(".fpblock--background-image").fpblock_reload_script()})},e.fn.fpblock_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var t=e(this),n=t.find("textarea"),o=t.find(".CodeMirror"),l=n.data("editor");o.length&&o.remove();var a=setInterval(function(){if(t.is(":visible")){var o=CodeMirror.fromTextArea(n[0],l);if("default"!==l.theme&&-1===i.vars.code_themes.indexOf(l.theme)){var c=e("<link>");e("#fpblock-codemirror-css").after(c),c.attr({rel:"stylesheet",id:"fpblock-codemirror-"+l.theme+"-css",href:l.cdnURL+"/theme/"+l.theme+".min.css",type:"text/css",media:"all"}),i.vars.code_themes.push(l.theme)}CodeMirror.modeURL=l.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(o,l.mode),o.on("change",function(e,t){n.val(o.getValue()).trigger("change")}),clearInterval(a)}})}})},e.fn.fpblock_field_date=function(){return this.each(function(){var t=e(this),n=t.find("input"),o=t.find(".fpblock-date-settings").data("settings");o=e.extend({},o,{showAnim:"",beforeShow:function(t,n){e(n.dpDiv).addClass("fpblock-datepicker-wrapper")},onClose:function(t,n){e(n.dpDiv).removeClass("fpblock-datepicker-wrapper")}}),2===n.length&&(o=e.extend({},o,{onSelect:function(t){e(this),n.first();var i=n.first().attr("id")===e(this).attr("id")?"minDate":"maxDate",l=e.datepicker.parseDate(o.dateFormat,t);n.not(this).datepicker("option",i,l)}})),n.each(function(){var t=e(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(o)})})},e.fn.fpblock_field_datetime=function(){return this.each(function(){var t=e(this),n=t.find("input"),o=t.find(".fpblock-datetime-settings").data("settings");o=e.extend({},o,{onReady:function(t,n,o){e(o.calendarContainer).addClass("fpblock-flatpickr")}}),2===n.length&&(o=e.extend({},o,{onChange:function(t,o,i){"from"===e(i.element).data("type")?n.last().get(0)._flatpickr.set("minDate",t[0]):n.first().get(0)._flatpickr.set("maxDate",t[0])}})),n.each(function(){e(this).flatpickr(o)})})},e.fn.fpblock_field_fieldset=function(){return this.each(function(){e(this).find(".fpblock-fieldset-content").fpblock_reload_script()})},e.fn.fpblock_field_gallery=function(){return this.each(function(){var n,o=e(this),i=o.find(".fpblock-edit-gallery"),l=o.find(".fpblock-clear-gallery"),a=o.find("ul"),c=o.find("input");o.find("img"),o.on("click",".fpblock-button, .fpblock-edit-gallery",function(o){var r=e(this),f=c.val(),d=r.hasClass("fpblock-edit-gallery")?"edit":"add",s="add"!==d||f.length?"gallery-edit":"gallery";o.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery&&("gallery"===s?(n=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(n=t.wp.media.gallery.edit('[gallery ids="'+f+'"]'),"add"===d&&n.setState("gallery-library")),n.on("update",function(e){a.empty();var t=e.models.map(function(e){var t=e.toJSON(),n=t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail.url:t.url;return a.append('<li><img src="'+n+'"></li>'),t.id});c.val(t.join(",")).trigger("change"),l.removeClass("hidden"),i.removeClass("hidden")}))}),l.on("click",function(e){e.preventDefault(),a.empty(),c.val("").trigger("change"),l.addClass("hidden"),i.addClass("hidden")})})},e.fn.fpblock_field_group=function(){return this.each(function(){var t=e(this),n=t.children(".fpblock-fieldset"),o=n.length?n:t,l=o.children(".fpblock-cloneable-wrapper"),a=o.children(".fpblock-cloneable-hidden"),c=o.children(".fpblock-cloneable-max"),r=o.children(".fpblock-cloneable-min"),f=l.data("title-by"),d=l.data("title-by-prefix"),s=l.data("field-id"),p=Boolean(Number(l.data("title-number"))),h=parseInt(l.data("max")),b=parseInt(l.data("min"));l.hasClass("ui-accordion")&&l.find(".ui-accordion-header-icon").remove();var k=function(t){t.find(".fpblock-cloneable-title-number").each(function(t){e(this).html(e(this).closest(".fpblock-cloneable-item").index()+1+".")})};l.accordion({header:"> .fpblock-cloneable-item > .fpblock-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"fpblock-cloneable-header-icon fas fa-angle-right",activeHeader:"fpblock-cloneable-header-icon fas fa-angle-down"},activate:function(t,n){var o=n.newPanel,i=n.newHeader;if(o.length&&!o.data("opened")){var l=i.find(".fpblock-cloneable-value"),a=[];e.each(f,function(e,t){a.push(o.find('[data-depend-id="'+t+'"]'))}),e.each(a,function(t,n){n.on("change keyup fpblock.keyup",function(){var t=[];e.each(a,function(e,n){var o=n.val();o&&t.push(o)}),t.length&&l.text(t.join(d))}).trigger("fpblock.keyup")}),o.fpblock_reload_script(),o.data("opened",!0),o.data("retry",!1)}else o.data("retry")&&(o.fpblock_reload_script_retry(),o.data("retry",!1))}}),l.sortable({axis:"y",handle:".fpblock-cloneable-title,.fpblock-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){l.accordion({active:!1}),l.sortable("refreshPositions"),t.item.children(".fpblock-cloneable-content").data("retry",!0)},update:function(e,t){i.helper.name_nested_replace(l.children(".fpblock-cloneable-item"),s),l.fpblock_customizer_refresh(),p&&k(l)}}),o.children(".fpblock-cloneable-add").on("click",function(e){e.preventDefault();var t=l.children(".fpblock-cloneable-item").length;if(r.hide(),h&&t+1>h){c.show();return}var n=a.fpblock_clone(!0);n.removeClass("fpblock-cloneable-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(s+"[0]",s+"["+t+"]")}),l.append(n),l.accordion("refresh"),l.accordion({active:t}),l.fpblock_customizer_refresh(),l.fpblock_customizer_listen({closest:!0}),p&&k(l)});var u=function(t){t.preventDefault();var n=l.children(".fpblock-cloneable-item").length;if(r.hide(),h&&n+1>h){c.show();return}var o=e(this).parent().parent(),a=o.children(".fpblock-cloneable-helper").fpblock_clone(!0),f=o.children(".fpblock-cloneable-title").fpblock_clone(),d=o.children(".fpblock-cloneable-content").fpblock_clone(),b=e('<div class="fpblock-cloneable-item" />');b.append(a),b.append(f),b.append(d),l.children().eq(o.index()).after(b),i.helper.name_nested_replace(l.children(".fpblock-cloneable-item"),s),l.accordion("refresh"),l.fpblock_customizer_refresh(),l.fpblock_customizer_listen({closest:!0}),p&&k(l)};l.children(".fpblock-cloneable-item").children(".fpblock-cloneable-helper").on("click",".fpblock-cloneable-clone",u),o.children(".fpblock-cloneable-hidden").children(".fpblock-cloneable-helper").on("click",".fpblock-cloneable-clone",u);var v=function(t){t.preventDefault();var n=l.children(".fpblock-cloneable-item").length;if(c.hide(),r.hide(),b&&n-1<b){r.show();return}e(this).closest(".fpblock-cloneable-item").remove(),i.helper.name_nested_replace(l.children(".fpblock-cloneable-item"),s),l.fpblock_customizer_refresh(),p&&k(l)};l.children(".fpblock-cloneable-item").children(".fpblock-cloneable-helper").on("click",".fpblock-cloneable-remove",v),o.children(".fpblock-cloneable-hidden").children(".fpblock-cloneable-helper").on("click",".fpblock-cloneable-remove",v)})},e.fn.fpblock_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".fpblock-icon-add",function(o){o.preventDefault();var l=e(this),a=e("#fpblock-modal-icon");a.removeClass("hidden"),i.vars.$icon_target=n,i.vars.icon_modal_loaded||(a.find(".fpblock-modal-loading").show(),t.wp.ajax.post("fpblock-get-icons",{nonce:l.data("nonce")}).done(function(t){a.find(".fpblock-modal-loading").hide(),i.vars.icon_modal_loaded=!0;var n=a.find(".fpblock-modal-load").html(t.content);n.on("click","i",function(t){t.preventDefault();var n=e(this).attr("title");i.vars.$icon_target.find(".fpblock-icon-preview i").removeAttr("class").addClass(n),i.vars.$icon_target.find(".fpblock-icon-preview").removeClass("hidden"),i.vars.$icon_target.find(".fpblock-icon-remove").removeClass("hidden"),i.vars.$icon_target.find("input").val(n).trigger("change"),a.addClass("hidden")}),a.on("change keyup",".fpblock-icon-search",function(){var t=e(this).val();n.find("i").each(function(){var n=e(this);0>n.attr("title").search(RegExp(t,"i"))?n.hide():n.show()})}),a.on("click",".fpblock-modal-close, .fpblock-modal-overlay",function(){a.addClass("hidden")})}).fail(function(e){a.find(".fpblock-modal-loading").hide(),a.find(".fpblock-modal-load").html(e.error),a.on("click",function(){a.addClass("hidden")})}))}),n.on("click",".fpblock-icon-remove",function(t){t.preventDefault(),n.find(".fpblock-icon-preview").addClass("hidden"),n.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.fpblock_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var t=e(this),n=t.find(".fpblock--map-osm"),o=t.find(".fpblock--map-search input"),i=t.find(".fpblock--latitude"),l=t.find(".fpblock--longitude"),a=t.find(".fpblock--zoom"),c=n.data("map"),r=L.map(n.get(0),c);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);var f=L.marker(c.center,{draggable:!0}).addTo(r),d=function(e){i.val(e.lat),l.val(e.lng),a.val(r.getZoom())};r.on("click",function(e){f.setLatLng(e.latlng),d(e.latlng)}),r.on("zoom",function(){d(f.getLatLng())}),f.on("drag",function(){d(f.getLatLng())}),o.length||(o=e('[data-depend-id="'+t.find(".fpblock--address-field").data("address-field")+'"]'));var s={};o.autocomplete({source:function(t,n){var o=t.term;if(o in s){n(s[o]);return}e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:o},function(e){var t;t=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],s[o]=t,n(t)})},select:function(e,t){if("no-data"===t.item.value)return!1;var n=L.latLng(t.item.lat,t.item.lon);r.panTo(n),f.setLatLng(n),d(n)},create:function(t,n){e(this).autocomplete("widget").addClass("fpblock-map-ui-autocomplate")}});var p=function(){var e=L.latLng(i.val(),l.val());r.panTo(e),f.setLatLng(e)};i.on("change",p),l.on("change",p)}})},e.fn.fpblock_field_link=function(){return this.each(function(){var n=e(this),o=n.find(".fpblock--link"),l=n.find(".fpblock--add"),a=n.find(".fpblock--edit"),c=n.find(".fpblock--remove"),r=n.find(".fpblock--result"),f=i.helper.uid("fpblock-wplink-textarea-");l.on("click",function(e){e.preventDefault(),t.wpLink.open(f)}),a.on("click",function(t){t.preventDefault(),l.trigger("click"),e("#wp-link-url").val(n.find(".fpblock--url").val()),e("#wp-link-text").val(n.find(".fpblock--text").val()),e("#wp-link-target").prop("checked","_blank"===n.find(".fpblock--target").val())}),c.on("click",function(e){e.preventDefault(),n.find(".fpblock--url").val("").trigger("change"),n.find(".fpblock--text").val(""),n.find(".fpblock--target").val(""),l.removeClass("hidden"),a.addClass("hidden"),c.addClass("hidden"),r.parent().addClass("hidden")}),o.attr("id",f).on("change",function(){var o=t.wpLink.getAttrs(),i=o.href,f=e("#wp-link-text").val(),d=o.target?o.target:"";n.find(".fpblock--url").val(i).trigger("change"),n.find(".fpblock--text").val(f),n.find(".fpblock--target").val(d),r.html('{url:"'+i+'", text:"'+f+'", target:"'+d+'"}'),l.addClass("hidden"),a.removeClass("hidden"),c.removeClass("hidden"),r.parent().removeClass("hidden")})})},e.fn.fpblock_field_media=function(){return this.each(function(){var n,o=e(this),i=o.find(".fpblock--button"),l=o.find(".fpblock--remove"),a=i.data("library")&&i.data("library").split(",")||"",c=!!o.hasClass("fpblock-assign-field-background")&&o.closest(".fpblock-field-background").find(".fpblock--auto-attributes");i.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:a}})).on("select",function(){var e,t=n.state().get("selection").first().attributes,r=i.data("preview-size")||"thumbnail";(!a.length||-1!==a.indexOf(t.subtype)||-1!==a.indexOf(t.type))&&(o.find(".fpblock--id").val(t.id),o.find(".fpblock--width").val(t.width),o.find(".fpblock--height").val(t.height),o.find(".fpblock--alt").val(t.alt),o.find(".fpblock--title").val(t.title),o.find(".fpblock--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===r?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,c&&c.removeClass("fpblock--attributes-hidden"),l.removeClass("hidden"),o.find(".fpblock--preview").removeClass("hidden"),o.find(".fpblock--src").attr("src",e),o.find(".fpblock--thumbnail").val(e),o.find(".fpblock--url").val(t.url).trigger("change"))}),n.open()}}),l.on("click",function(e){e.preventDefault(),c&&c.addClass("fpblock--attributes-hidden"),l.addClass("hidden"),o.find("input").val(""),o.find(".fpblock--preview").addClass("hidden"),o.find(".fpblock--url").trigger("change")})})},e.fn.fpblock_field_repeater=function(){return this.each(function(){var t=e(this),n=t.children(".fpblock-fieldset"),o=n.length?n:t,l=o.children(".fpblock-repeater-wrapper"),a=o.children(".fpblock-repeater-hidden"),c=o.children(".fpblock-repeater-max"),r=o.children(".fpblock-repeater-min"),f=l.data("field-id"),d=parseInt(l.data("max")),s=parseInt(l.data("min"));l.children(".fpblock-repeater-item").children(".fpblock-repeater-content").fpblock_reload_script(),l.sortable({axis:"y",handle:".fpblock-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){i.helper.name_nested_replace(l.children(".fpblock-repeater-item"),f),l.fpblock_customizer_refresh(),t.item.fpblock_reload_script_retry()}}),o.children(".fpblock-repeater-add").on("click",function(e){e.preventDefault();var t=l.children(".fpblock-repeater-item").length;if(r.hide(),d&&t+1>d){c.show();return}var n=a.fpblock_clone(!0);n.removeClass("fpblock-repeater-hidden"),n.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(f+"[0]",f+"["+t+"]")}),l.append(n),n.children(".fpblock-repeater-content").fpblock_reload_script(),l.fpblock_customizer_refresh(),l.fpblock_customizer_listen({closest:!0})});var p=function(t){t.preventDefault();var n=l.children(".fpblock-repeater-item").length;if(r.hide(),d&&n+1>d){c.show();return}var o=e(this).parent().parent().parent(),a=o.children(".fpblock-repeater-content").fpblock_clone(),s=o.children(".fpblock-repeater-helper").fpblock_clone(!0),p=e('<div class="fpblock-repeater-item" />');p.append(a),p.append(s),l.children().eq(o.index()).after(p),p.children(".fpblock-repeater-content").fpblock_reload_script(),i.helper.name_nested_replace(l.children(".fpblock-repeater-item"),f),l.fpblock_customizer_refresh(),l.fpblock_customizer_listen({closest:!0})};l.children(".fpblock-repeater-item").children(".fpblock-repeater-helper").on("click",".fpblock-repeater-clone",p),o.children(".fpblock-repeater-hidden").children(".fpblock-repeater-helper").on("click",".fpblock-repeater-clone",p);var h=function(t){t.preventDefault();var n=l.children(".fpblock-repeater-item").length;if(c.hide(),r.hide(),s&&n-1<s){r.show();return}e(this).closest(".fpblock-repeater-item").remove(),i.helper.name_nested_replace(l.children(".fpblock-repeater-item"),f),l.fpblock_customizer_refresh()};l.children(".fpblock-repeater-item").children(".fpblock-repeater-helper").on("click",".fpblock-repeater-remove",h),o.children(".fpblock-repeater-hidden").children(".fpblock-repeater-helper").on("click",".fpblock-repeater-remove",h)})},e.fn.fpblock_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),o=t.find(".fpblock-slider-ui"),i=n.data(),l=n.val()||0;o.hasClass("ui-slider")&&o.empty(),o.slider({range:"min",value:l,min:i.min||0,max:i.max||100,step:i.step||1,slide:function(e,t){n.val(t.value).trigger("change")}}),n.on("keyup",function(){o.slider("value",n.val())})})},e.fn.fpblock_field_sortable=function(){return this.each(function(){var t=e(this).find(".fpblock-sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.fpblock_customizer_refresh()}}),t.find(".fpblock-sortable-content").fpblock_reload_script()})},e.fn.fpblock_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".fpblock-enabled"),o=t.find(".fpblock-disabled"),i=!!o.length&&o;n.sortable({connectWith:i,placeholder:"ui-sortable-placeholder",update:function(e,n){var o=n.item.find("input");n.item.parent().hasClass("fpblock-enabled")?o.attr("name",o.attr("name").replace("disabled","enabled")):o.attr("name",o.attr("name").replace("enabled","disabled")),t.fpblock_customizer_refresh()}}),i&&i.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,n){t.fpblock_customizer_refresh()}})})},e.fn.fpblock_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),o=t.find(".ui-button"),i=n.data();o.length&&o.remove(),n.spinner({min:i.min||0,max:i.max||100,step:i.step||1,create:function(e,t){i.unit&&n.after('<span class="ui-button fpblock--unit">'+i.unit+"</span>")},spin:function(e,t){n.val(t.value).trigger("change")}})})},e.fn.fpblock_field_switcher=function(){return this.each(function(){var t=e(this).find(".fpblock--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("fpblock--active")?t.removeClass("fpblock--active"):(e=1,t.addClass("fpblock--active")),n.val(e).trigger("change")})})},e.fn.fpblock_field_switcher_box=function(){return this.each(function(){var t=e(this).find(".fpblock--switcher");t.on("click",function(){var e=0,n=t.find("input");t.hasClass("fpblock--active")?t.removeClass("fpblock--active"):(e=1,t.addClass("fpblock--active")),n.val(e).trigger("change")})})},e.fn.fpblock_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".fpblock-tabbed-nav a"),o=t.find(".fpblock-tabbed-content");o.eq(0).fpblock_reload_script(),n.on("click",function(t){t.preventDefault();var n=e(this),i=n.index(),l=o.eq(i);n.addClass("fpblock-tabbed-active").siblings().removeClass("fpblock-tabbed-active"),l.fpblock_reload_script(),l.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.fpblock_field_typography=function(){return this.each(function(){var t=this,n=e(this),o=[],l=fpblock_typography_json.webfonts,a=fpblock_typography_json.googlestyles,c=fpblock_typography_json.defaultstyles;t.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},t.sanitize_style=function(e){return a[e]?a[e]:e},t.load_google_font=function(e,t,n){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",n=n?n.replace("normal",""):"",(t||n)&&(e=e+":"+t+n),-1===o.indexOf(e)&&WebFont.load({google:{families:[e]}}),o.push(e))},t.append_select_options=function(n,o,i,l,a){n.find("option").not(":first").remove();var c="";e.each(o,function(e,n){var o,r=n;o=a?i&&-1!==i.indexOf(n)?" selected":"":i&&i===n?" selected":"","subset"===l?r=t.sanitize_subset(n):"style"===l&&(r=t.sanitize_style(n)),c+='<option value="'+n+'"'+o+">"+r+"</option>"}),n.append(c).trigger("fpblock.change").trigger("chosen:updated")},t.init=function(){var o=[],a=n.find(".fpblock--typography"),r=n.find(".fpblock--type"),f=n.find(".fpblock--block-font-style"),d=a.data("unit"),s=a.data("line-height-unit"),p=a.data("exclude")?a.data("exclude").split(","):[];n.find(".fpblock--chosen").length&&n.find("select").each(function(){var t=e(this),n=t.parent().find(".chosen-container");n.length&&n.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})});var h=n.find(".fpblock--font-family"),b=h.val();h.find("option").not(":first-child").remove();var k="";e.each(l,function(t,n){(!p||-1===p.indexOf(t))&&(k+='<optgroup label="'+n.label+'">',e.each(n.fonts,function(e,n){var o=(n="object"==typeof n?e:n)===b?" selected":"";k+='<option value="'+n+'" data-type="'+t+'"'+o+">"+n+"</option>"}),k+="</optgroup>")}),h.append(k).trigger("chosen:updated");var u=n.find(".fpblock--block-font-style");if(u.length){var v=n.find(".fpblock--font-style-select"),g=v.val()?v.val().replace(/normal/g,""):"";v.on("change fpblock.change",function(e){var t=v.val();!t&&o&&-1===o.indexOf("normal")&&(t=o[0]);var i=t&&"italic"!==t&&"normal"===t?"normal":"",l=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):i,a=t&&"italic"===t.substr(-6)?"italic":"";n.find(".fpblock--font-weight").val(l),n.find(".fpblock--font-style").val(a)});var m=n.find(".fpblock--block-extra-styles");if(m.length)var y=n.find(".fpblock--extra-styles"),C=y.val()}var w=n.find(".fpblock--block-subset");if(w.length)var x=n.find(".fpblock--subset"),$=x.val(),_=x.data("multiple")||!1;var z=n.find(".fpblock--block-backup-font-family");h.on("change fpblock.change",function(e){w.length&&w.addClass("hidden"),m.length&&m.addClass("hidden"),z.length&&z.addClass("hidden");var n=h.find(":selected"),i=n.val(),a=n.data("type");if(a&&i){if(("google"===a||"custom"===a)&&z.length&&z.removeClass("hidden"),u.length){var d=c;"google"===a&&l[a].fonts[i][0]?d=l[a].fonts[i][0]:"custom"===a&&l[a].fonts[i]&&(d=l[a].fonts[i]),o=d;var s=-1!==d.indexOf("normal")?"normal":d[0],p=g&&-1!==d.indexOf(g)?g:s;t.append_select_options(v,d,p,"style"),g=!1,u.removeClass("hidden"),"google"===a&&m.length&&d.length>1&&(t.append_select_options(y,d,C,"style",!0),C=!1,m.removeClass("hidden"))}if("google"===a&&w.length&&l[a].fonts[i][1]){var b=l[a].fonts[i][1],k=b.length<2&&"latin"!==b[0]?b[0]:"",D=$&&-1!==b.indexOf($)?$:k;D=_&&$?$:D,t.append_select_options(x,b,D,"subset",_),$=!1,w.removeClass("hidden")}}else f.find(":input").val(""),w.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),u.length&&(v.find("option").not(":first-child").remove(),v.trigger("chosen:updated"));r.val(a)}).trigger("fpblock.change");var D=n.find(".fpblock--block-preview");if(D.length){var O=n.find(".fpblock--preview");n.on("change",i.helper.debounce(function(e){D.removeClass("hidden");var o=h.val(),i=n.find(".fpblock--font-weight").val(),l=n.find(".fpblock--font-style").val(),a=n.find(".fpblock--font-size").val(),c=n.find(".fpblock--font-variant").val(),r=n.find(".fpblock--line-height").val(),f=n.find(".fpblock--text-align").val(),p=n.find(".fpblock--text-transform").val(),b=n.find(".fpblock--text-decoration").val(),k=n.find(".fpblock--color").val(),u=n.find(".fpblock--word-spacing").val(),v=n.find(".fpblock--letter-spacing").val(),g=n.find(".fpblock--custom-style").val();"google"===n.find(".fpblock--type").val()&&t.load_google_font(o,i,l);var m={};o&&(m.fontFamily=o),i&&(m.fontWeight=i),l&&(m.fontStyle=l),c&&(m.fontVariant=c),a&&(m.fontSize=a+d),r&&(m.lineHeight=r+s),v&&(m.letterSpacing=v+d),u&&(m.wordSpacing=u+d),f&&(m.textAlign=f),p&&(m.textTransform=p),b&&(m.textDecoration=b),k&&(m.color=k),O.removeAttr("style"),g&&O.attr("style",g),O.css(m)},100)),D.on("click",function(){O.toggleClass("fpblock--black-background");var e=D.find(".fpblock--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),D.hasClass("hidden")||n.trigger("change")}},t.init()})},e.fn.fpblock_field_upload=function(){return this.each(function(){var n,o=e(this),i=o.find("input"),l=o.find(".fpblock--button"),a=o.find(".fpblock--remove"),c=o.find(".fpblock--preview"),r=o.find(".fpblock--src"),f=l.data("library")&&l.data("library").split(",")||"";l.on("click",function(e){if(e.preventDefault(),void 0!==t.wp&&t.wp.media&&t.wp.media.gallery){if(n){n.open();return}(n=t.wp.media({library:{type:f}})).on("select",function(){var e=n.state().get("selection").first().attributes;(!f.length||-1!==f.indexOf(e.subtype)||-1!==f.indexOf(e.type))&&i.val(e.url).trigger("change")}),n.open()}}),a.on("click",function(e){e.preventDefault(),i.val("").trigger("change")}),i.on("change",function(t){var n=i.val();n?a.removeClass("hidden"):a.addClass("hidden"),c.length&&(-1!==e.inArray(n.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(c.removeClass("hidden"),r.attr("src",n)):c.addClass("hidden"))})})},e.fn.fpblock_field_wp_editor=function(){return this.each(function(){if(void 0!==t.wp.editor&&void 0!==t.tinyMCEPreInit&&void 0!==t.tinyMCEPreInit.mceInit.fpblock_wp_editor){var n=e(this),o=n.find(".fpblock-wp-editor"),l=n.find("textarea");(n.find(".wp-editor-wrap").length||n.find(".mce-container").length)&&(o.empty(),o.append(l),l.css("display",""));var a=i.helper.uid("fpblock-editor-");l.attr("id",a);var c={tinymce:t.tinyMCEPreInit.mceInit.fpblock_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.fpblock_wp_editor},r=o.data("editor-settings"),f=wp.oldEditor?wp.oldEditor:wp.editor;f&&f.hasOwnProperty("autop")&&(wp.editor.autop=f.autop,wp.editor.removep=f.removep,wp.editor.initialize=f.initialize);var d=function(e){e.on("change keyup",function(){var t=r.wpautop?e.getContent():wp.editor.removep(e.getContent());l.val(t).trigger("change")})};c.tinymce=e.extend({},c.tinymce,{selector:"#"+a,setup:d}),!1===r.tinymce&&(c.tinymce=!1,o.addClass("fpblock-no-tinymce")),!1===r.quicktags&&(c.quicktags=!1,o.addClass("fpblock-no-quicktags"));var s=setInterval(function(){n.is(":visible")&&(t.wp.editor.initialize(a,c),clearInterval(s))});if(r.media_buttons&&t.fpblock_media_buttons){var p=o.find(".wp-media-buttons");if(p.length)p.find(".fpblock-shortcode-button").data("editor-id",a);else{var h=e(t.fpblock_media_buttons);h.find(".fpblock-shortcode-button").data("editor-id",a),o.prepend(h)}}}})},e.fn.fpblock_confirm=function(){return this.each(function(){e(this).on("click",function(n){var o=e(this).data("confirm")||t.fpblock_vars.i18n.confirm;if(!confirm(o))return n.preventDefault(),!1;i.vars.is_confirm=!0,i.vars.form_modified=!1})})},e.fn.serializeObject=function(){var t={};return e.each(this.serializeArray(),function(n,i){var l=i.name,a=i.value;t[l]=o===t[l]?a:e.isArray(t[l])?t[l].concat(a):[t[l],a]}),t},e.fn.fpblock_save=function(){return this.each(function(){var n,o=e(this),l=e(".fpblock-save"),a=e(".fpblock-options"),c=!1;o.on("click",function(r){if(!c){var f=o.data("save"),d=o.val();l.attr("value",f),o.hasClass("fpblock-save-ajax")?(r.preventDefault(),a.addClass("fpblock-saving"),l.prop("disabled",!0),t.wp.ajax.post("fpblock_"+a.data("unique")+"_ajax_save",{data:e("#fpblock-form").serializeJSONFPBLOCK()}).done(function(t){if(e(".fpblock-error").remove(),Object.keys(t.errors).length){var o='<i class="fpblock-label-error fpblock-error">!</i>';e.each(t.errors,function(t,n){var i=e('[data-depend-id="'+t+'"]'),l=e('a[href="#tab='+i.closest(".fpblock-section").data("section-id")+'"]'),a=l.closest(".fpblock-tab-item");i.closest(".fpblock-fieldset").append('<p class="fpblock-error fpblock-error-text">'+n+"</p>"),l.find(".fpblock-error").length||l.append(o),a.find(".fpblock-arrow .fpblock-error").length||a.find(".fpblock-arrow").append(o)})}a.removeClass("fpblock-saving"),l.prop("disabled",!1).attr("value",d),c=!1,i.vars.form_modified=!1,i.vars.$form_warning.hide(),clearTimeout(n);var r=e(".fpblock-form-success");r.empty().append(t.notice).fadeIn("fast",function(){n=setTimeout(function(){r.fadeOut("fast")},3e3)})}).fail(function(e){alert(e.error)})):i.vars.form_modified=!1}c=!0})})},e.fn.fpblock_options=function(){return this.each(function(){var l=e(this),a=l.find(".fpblock-content"),c=l.find(".fpblock-form-success"),r=l.find(".fpblock-form-warning"),f=l.find(".fpblock-header .fpblock-save");i.vars.$form_warning=r,r.length&&(t.onbeforeunload=function(){return!!i.vars.form_modified||o},a.on("change keypress",":input",function(){i.vars.form_modified||(c.hide(),r.fadeIn("fast"),i.vars.form_modified=!0)})),c.hasClass("fpblock-form-show")&&setTimeout(function(){c.fadeOut("fast")},3e3),e(n).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return f.trigger("click"),e.preventDefault(),!1})})},e.fn.fpblock_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if("addtag"===n.attr("id")){var o=n.find("#submit"),i=t.find(".fpblock-field").fpblock_clone();o.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(t.data("inited",!1),t.empty(),t.html(i),i=i.fpblock_clone(),t.fpblock_reload_script())})}})},e.fn.fpblock_shortcode=function(){var l=this;return l.shortcode_parse=function(t,n){var o="";return e.each(t,function(t,i){o+="["+(n=n||t),e.each(i,function(e,t){"content"===e?(o+="]",o+=t,o+="[/"+n):o+=l.shortcode_tags(e,t)}),o+="]"}),o},l.shortcode_tags=function(t,n){var o="";return""!==n&&("object"!=typeof n||e.isArray(n)?o+=" "+t+'="'+n.toString()+'"':e.each(n,function(e,t){"background-image"===e&&(t=t.url?t.url:""),""!==t&&(o+=" "+e+'="'+t.toString()+'"')})),o},l.insertAtChars=function(e,t){var n=void 0!==e[0].name?e[0]:e;return n.value.length&&void 0!==n.selectionStart?(n.focus(),n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)):(n.focus(),t)},l.send_to_editor=function(t,n){var o;if("undefined"!=typeof tinymce&&(o=tinymce.get(n)),o&&!o.isHidden())o.execCommand("mceInsertContent",!1,t);else{var i=e("#"+n);i.val(l.insertAtChars(i,t)).trigger("change")}},this.each(function(){var a,c,r,f,d,s,p,h,b,k=e(this),u=k.find(".fpblock-modal-load"),v=(k.find(".fpblock-modal-content"),k.find(".fpblock-modal-insert")),g=k.find(".fpblock-modal-loading"),m=k.find("select"),y=k.data("modal-id"),C=k.data("nonce");e(n).on("click",'.fpblock-shortcode-button[data-modal-id="'+y+'"]',function(t){t.preventDefault(),a=(b=e(this)).data("editor-id")||!1,c=b.data("target-id")||!1,r=b.data("gutenberg-id")||!1,k.removeClass("hidden"),k.hasClass("fpblock-shortcode-single")&&d===o&&m.trigger("change")}),m.on("change",function(){var n=e(this),o=n.find(":selected");f=n.val(),d=o.data("shortcode"),s=o.data("view")||"normal",p=o.data("group")||d,u.empty(),f?(g.show(),t.wp.ajax.post("fpblock-get-shortcode-"+y,{shortcode_key:f,nonce:C}).done(function(t){g.hide();var n=e(t.content).appendTo(u);v.parent().removeClass("hidden"),h=n.find(".fpblock--repeat-shortcode").fpblock_clone(),n.fpblock_reload_script(),n.find(".fpblock-fields").fpblock_reload_script()})):v.parent().addClass("hidden")}),v.on("click",function(n){if(n.preventDefault(),!(v.prop("disabled")||v.attr("disabled"))){var o="",i=k.find(".fpblock-field:not(.fpblock-depend-on)").find(":input:not(.ignore)").serializeObjectFPBLOCK();switch(s){case"contents":var f=d?i[d]:i;e.each(f,function(e,t){var n=d||e;o+="["+n+"]"+t+"[/"+n+"]"});break;case"group":o+="["+d,e.each(i[d],function(e,t){o+=l.shortcode_tags(e,t)}),o+="]",o+=l.shortcode_parse(i[p],p),o+="[/"+d+"]";break;case"repeater":o+=l.shortcode_parse(i[p],p);break;default:o+=l.shortcode_parse(i)}if(o=""===o?"["+d+"]":o,r){var h=t.fpblock_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.fpblock_gutenberg_props.attributes.shortcode:"";t.fpblock_gutenberg_props.setAttributes({shortcode:h+o})}else if(a)l.send_to_editor(o,a);else{var u=c?e(c):b.parent().find("textarea");u.val(l.insertAtChars(u,o)).trigger("change")}k.addClass("hidden")}}),k.on("click",".fpblock--repeat-button",function(e){e.preventDefault();var t=k.find(".fpblock--repeatable"),n=h.fpblock_clone(),o=n.find(".fpblock-repeat-remove");n.appendTo(t),n.find(".fpblock-fields").fpblock_reload_script(),i.helper.name_nested_replace(k.find(".fpblock--repeat-shortcode"),p),o.on("click",function(){n.remove(),i.helper.name_nested_replace(k.find(".fpblock--repeat-shortcode"),p)})}),k.on("click",".fpblock-modal-close, .fpblock-modal-overlay",function(){k.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e}),i.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:n,rgba:n<100}},e.fn.fpblock_color=function(){return this.each(function(){var n,o=e(this),l=i.funcs.parse_color(o.val()),a=!t.fpblock_vars.color_palette.length||t.fpblock_vars.color_palette;o.hasClass("wp-color-picker")&&o.closest(".wp-picker-container").after(o).remove(),o.wpColorPicker({palettes:a,change:function(e,t){var i=t.color.toString();n.removeClass("fpblock--transparent-active"),n.find(".fpblock--transparent-offset").css("background-color",i),o.val(i).trigger("change")},create:function(){n=o.closest(".wp-picker-container");var t=o.data("a8cIris"),a=e('<div class="fpblock--transparent-wrap"><div class="fpblock--transparent-slider"></div><div class="fpblock--transparent-offset"></div><div class="fpblock--transparent-text"></div><div class="fpblock--transparent-button">transparent <i class="fas fa-toggle-off"></i></div></div>').appendTo(n.find(".wp-picker-holder")),c=a.find(".fpblock--transparent-slider"),r=a.find(".fpblock--transparent-text"),f=a.find(".fpblock--transparent-offset"),d=a.find(".fpblock--transparent-button");"transparent"===o.val()&&n.addClass("fpblock--transparent-active"),d.on("click",function(){"transparent"!==o.val()?(o.val("transparent").trigger("change").removeClass("iris-error"),n.addClass("fpblock--transparent-active")):(o.val(t._color.toString()).trigger("change"),n.removeClass("fpblock--transparent-active"))}),c.slider({value:l.transparent,step:1,min:0,max:100,slide:function(e,n){var i=parseFloat(n.value/100);t._color._alpha=i,o.wpColorPicker("color",t._color.toString()),r.text(1===i||0===i?"":i)},create:function(){var e=parseFloat(l.transparent/100);r.text(e<1?e:""),f.css("background-color",l.value),n.on("click",".wp-picker-clear",function(){t._color._alpha=1,r.text(""),c.slider("option","value",100),n.removeClass("fpblock--transparent-active"),o.trigger("change")}),n.on("click",".wp-picker-default",function(){var e=i.funcs.parse_color(o.data("default-color")),l=parseFloat(e.transparent/100);t._color._alpha=l,r.text(l<1?l:""),c.slider("option","value",e.transparent),"transparent"===e.value&&(o.removeClass("iris-error"),n.addClass("fpblock--transparent-active"))})}})}})})},e.fn.fpblock_chosen=function(){return this.each(function(){var n=e(this),i=n.parent().find(".chosen-container"),l=n.hasClass("fpblock-chosen-sortable")||!1,a=n.hasClass("fpblock-chosen-ajax")||!1,c=n.attr("multiple")||!1,r=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:c?"100%":"auto",no_results_text:t.fpblock_vars.i18n.no_results_text},n.data("chosen-settings"));if(i.length&&i.remove(),a){var f=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:t.fpblock_vars.i18n.typing_text,searching_text:t.fpblock_vars.i18n.searching_text,no_results_text:t.fpblock_vars.i18n.no_results_text},n.data("chosen-settings"));n.FPBLOCKAjaxChosen(f)}else n.chosen(r);if(c){var d=n.parent().find(".fpblock-hide-select"),s=d.val()||[];n.on("change",function(e,n){n&&n.selected?d.append('<option value="'+n.selected+'" selected="selected">'+n.selected+"</option>"):n&&n.deselected&&d.find('option[value="'+n.deselected+'"]').remove(),o!==t.wp.customize&&0===d.children().length&&d.data("customize-setting-link")&&t.wp.customize.control(d.data("customize-setting-link")).setting.set(""),d.trigger("change")}),n.FPBLOCKChosenOrder(s,!0)}if(l){var p=n.parent().find(".chosen-container").find(".chosen-choices");p.bind("mousedown",function(t){e(t.target).is("span")&&t.stopPropagation()}),p.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(t,o){var i="",l=n.data("chosen"),a=n.parent().find(".fpblock-hide-select");p.find(".search-choice-close").each(function(){var t=e(this).data("option-array-index");e.each(l.results_data,function(e,n){n.array_index===t&&(i+='<option value="'+n.value+'" selected>'+n.value+"</option>")})}),a.children().remove(),a.append(i),a.trigger("change")}})}})},e.fn.fpblock_checkbox=function(){return this.each(function(){var t=e(this),n=t.find(".fpblock--input"),o=t.find(".fpblock--checkbox");o.on("click",function(){n.val(Number(o.prop("checked"))).trigger("change")})})},e.fn.fpblock_checkbox_all=function(){return this.each(function(){var t=e(this);t.on("click",function(){var n=t.closest(".fpblock-field-checkbox").find(":input"),o=!1;n.each(function(){e(this).prop("checked")||(o=!0)}),o?(n.prop("checked","checked"),n.attr("checked","checked")):(n.prop("checked",""),n.removeAttr("checked")),n.first().trigger("change")})})},e.fn.fpblock_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".fpblock--sibling"),o=t.data("multiple")||!1;n.on("click",function(){var n=e(this);o?n.hasClass("fpblock--active")?(n.removeClass("fpblock--active"),n.find("input").prop("checked",!1).trigger("change")):(n.addClass("fpblock--active"),n.find("input").prop("checked",!0).trigger("change")):(t.find("input").prop("checked",!1),n.find("input").prop("checked",!0).trigger("change"),n.addClass("fpblock--active").siblings().removeClass("fpblock--active"))})})},e.fn.fpblock_help=function(){return this.each(function(){var t,n,l=e(this);l.on({mouseenter:function(){t=e('<div class="fpblock-tooltip"></div>').html(l.find(".fpblock-help-text").html()).appendTo("body"),n=i.vars.is_rtl?l.offset().left+24:l.offset().left-t.outerWidth(),t.css({top:l.offset().top-(t.outerHeight()/2-14),left:n})},mouseleave:function(){t!==o&&t.remove()}})})},e.fn.fpblock_customizer_refresh=function(){return this.each(function(){var i=e(this),l=i.closest(".fpblock-customize-complex");if(l.length){var a=l.data("unique-id");if(a===o)return;var c=l.find(":input"),r=l.data("option-id"),f=c.serializeObjectFPBLOCK(),d=!e.isEmptyObject(f)&&f[a]&&f[a][r]?f[a][r]:"",s=t.wp.customize.control(a+"["+r+"]");s.setting._value=null,s.setting.set(d)}else i.find(":input").first().trigger("change");e(n).trigger("fpblock-customizer-refresh",i)})},e.fn.fpblock_customizer_listen=function(n){var i=e.extend({closest:!1},n);return this.each(function(){if(o!==t.wp.customize){var n=i.closest?e(this).closest(".fpblock-customize-complex"):e(this),l=n.find(":input"),a=n.data("unique-id"),c=n.data("option-id");a!==o&&l.on("change keyup fpblock.change",function(){var o=n.find(":input").serializeObjectFPBLOCK(),i=!e.isEmptyObject(o)&&o[a]&&o[a][c]?o[a][c]:"";t.wp.customize.control(a+"["+c+"]").setting.set(i)})}})},e(n).on("expanded",".control-section",function(){var t=e(this);if(t.hasClass("open")&&!t.data("inited")){var n=t.find(".fpblock-customize-field"),o=t.find(".fpblock-customize-complex");n.length&&(t.fpblock_dependency(),n.fpblock_reload_script({dependency:!1}),o.fpblock_customizer_listen()),t.data("inited",!0)}}),i.vars.$window.on("resize fpblock.resize",i.helper.debounce(function(n){(navigator.userAgent.indexOf("AppleWebKit/")>-1?i.vars.$window.width():t.innerWidth)<=782&&!i.vars.onloaded&&(e(".fpblock-section").fpblock_reload_script(),i.vars.onloaded=!0)},200)).trigger("fpblock.resize"),e.fn.fpblock_widgets=function(){return this.each(function(){e(n).on("widget-added widget-updated",function(e,t){var n=t.find(".fpblock-fields");n.length&&n.fpblock_reload_script()}),e(n).on("click",".widget-top",function(t){var n=e(this).parent().find(".fpblock-fields");n.length&&n.fpblock_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".fpblock-fields").fpblock_reload_script_retry()})})},e.fn.fpblock_nav_menu=function(){return this.each(function(){var t=e(this);t.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".fpblock-fields").fpblock_reload_script()}),t.on("sortstop",function(e,t){t.item.find(".fpblock-fields").fpblock_reload_script_retry()})})},e.fn.fpblock_reload_script_retry=function(){return this.each(function(){var t=e(this);t.data("inited")&&t.children(".fpblock-field-wp_editor").fpblock_field_wp_editor()})},e.fn.fpblock_reload_script=function(t){var o=e.extend({dependency:!0},t);return this.each(function(){var t=e(this);t.data("inited")||(t.children(".fpblock-field-accordion").fpblock_field_accordion(),t.children(".fpblock-field-backup").fpblock_field_backup(),t.children(".fpblock-field-background").fpblock_field_background(),t.children(".fpblock-field-code_editor").fpblock_field_code_editor(),t.children(".fpblock-field-date").fpblock_field_date(),t.children(".fpblock-field-datetime").fpblock_field_datetime(),t.children(".fpblock-field-fieldset").fpblock_field_fieldset(),t.children(".fpblock-field-gallery").fpblock_field_gallery(),t.children(".fpblock-field-group").fpblock_field_group(),t.children(".fpblock-field-icon").fpblock_field_icon(),t.children(".fpblock-field-link").fpblock_field_link(),t.children(".fpblock-field-media").fpblock_field_media(),t.children(".fpblock-field-map").fpblock_field_map(),t.children(".fpblock-field-repeater").fpblock_field_repeater(),t.children(".fpblock-field-slider").fpblock_field_slider(),t.children(".fpblock-field-sortable").fpblock_field_sortable(),t.children(".fpblock-field-sorter").fpblock_field_sorter(),t.children(".fpblock-field-spinner").fpblock_field_spinner(),t.children(".fpblock-field-switcher").fpblock_field_switcher(),t.children(".fpblock-field-switcher_box").fpblock_field_switcher_box(),t.children(".fpblock-field-tabbed").fpblock_field_tabbed(),t.children(".fpblock-field-typography").fpblock_field_typography(),t.children(".fpblock-field-upload").fpblock_field_upload(),t.children(".fpblock-field-wp_editor").fpblock_field_wp_editor(),t.children(".fpblock-field-border").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-background").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-color").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-color_group").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-link_color").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-typography").find(".fpblock-color").fpblock_color(),t.children(".fpblock-field-select").find(".fpblock-chosen").fpblock_chosen(),t.children(".fpblock-field-checkbox").find(".fpblock-checkbox").fpblock_checkbox(),t.children(".fpblock-field-checkbox").find(".fpblock-checkbox-all").fpblock_checkbox_all(),t.children(".fpblock-field-button_set").find(".fpblock-siblings").fpblock_siblings(),t.children(".fpblock-field-image_select").find(".fpblock-siblings").fpblock_siblings(),t.children(".fpblock-field-palette").find(".fpblock-siblings").fpblock_siblings(),t.children(".fpblock-field").find(".fpblock-help").fpblock_help(),o.dependency&&t.fpblock_dependency(),t.data("inited",!0),e(n).trigger("fpblock-reload-script",t))})},e(n).ready(function(){e(".fpblock-save").fpblock_save(),e(".fpblock-options").fpblock_options(),e(".fpblock-sticky-header").fpblock_sticky(),e(".fpblock-nav-options").fpblock_nav_options(),e(".fpblock-nav-metabox").fpblock_nav_metabox(),e(".fpblock-taxonomy").fpblock_taxonomy(),e(".fpblock-page-templates").fpblock_page_templates(),e(".fpblock-post-formats").fpblock_post_formats(),e(".fpblock-shortcode").fpblock_shortcode(),e(".fpblock-search").fpblock_search(),e(".fpblock-confirm").fpblock_confirm(),e(".fpblock-expand-all").fpblock_expand_all(),e(".fpblock-onload").fpblock_reload_script(),e("#widgets-editor").fpblock_widgets(),e("#widgets-right").fpblock_widgets(),e("#menu-to-edit").fpblock_nav_menu()})}(jQuery,window,document);